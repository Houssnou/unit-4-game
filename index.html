<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="./assets/javascript/game.js"></script>
  <title>Crystal Game</title>
</head>

<body>
  <div class="jumbotron my-5 bg-dark text-light">
    <h1 class="display-4 text-center">Crystal Game!</h1>
    <p class="lead text-center">You will be given a random number at the start of the game </p>
    <p class="lead text-center">There are four crystals below.
      By clicking on a crystal you will add a specific amount of points to you total score
    </p>
    <p class="lead text-center">You win the game by matching your total score to random number, you lose the game if
      your total
      score goes above
      the random number.</p>
    <p class="lead text-center">
      The value of each crystal is hidden from you until you click on it.</p>

    <p class="lead text-center"> Each time when the game starts, the game will change the values of each crystal.</p>

    <hr class="my-4">
    <div class="row">
      <div class="col-3">
        <div class="card">
          <h3 class="card-header text-dark text-center">Number</h3>
          <div class="card-body text-dark text-center">
            <h1 id="number"></h1>
          </div>
        </div>
      </div>
      <div class="col-3">
        <div class="card">
          <h3 class="card-header text-dark text-center">Wins</h3>
          <div class="card-body text-dark text-center">
            <h1 id="wins"></h1>
          </div>
        </div>
      </div>
      <div class="col-3">
        <div class="card">
          <h3 class="card-header text-dark text-center">Losses</h3>
          <div class="card-body text-dark text-center">
            <h1 id="losses"></h1>
          </div>
        </div>
      </div>
      <div class="col-3">
        <div class="card">
          <h3 class="card-header text-dark text-center">Your Total</h3>
          <div class="card-body text-dark text-center">
            <h1 id="total"></h1>
          </div>
        </div>
      </div>
    </div>
    <hr class="my-4">
    <div id="crystalrow">
      <!-- <div class="col-3"><img src="./assets/images/0.jpg" class="img-thumbnail"/></div>
      <div class="col-3"><img src="./assets/images/1.jpg" class="img-thumbnail" /></div>
      <div class="col-3"><img src="./assets/images/2.jpg" class="img-thumbnail" /></div>
      <div class="col-3"><img src="./assets/images/3.jpg" class="img-thumbnail" /></div> -->
    </div>
  </div>
  </div>

  <script>
    var counter = 0;
    var number = 0;
    var wins = 0;
    var losses = 0;
    //crystalValues to store the random values 
    var crystalValues = [];

    //var number to guess generated by the computer
    number = Math.floor(Math.random() * 120) + 19;
    console.log(number);
    $("#number").text(number);

    function resetGame() {
      //setting the variables at 0 except wins and losses that will keep record of the user wins or losses
      crystalValues = [];
      counter = 0;
      $("#total").empty();
      //generates a new random number
      number = Math.floor(Math.random() * 120) + 19;
      $("#number").text(number);
    };

    //display the number to guess before creating the images link


    //loop to create the cristal images with their random values
    for (var i = 0; i < 4; i++) {

      //For each iteration, we will create an crystal value
      crystalValues[i] = Math.floor(Math.random() * 12) + 1;

      // For each iteration, we will create an imageCrystal 
      var imageCrystal = $("<img>");

      //adding the class img-thumbnail
      imageCrystal.addClass("img-thumbnail");

      // variable that containts the src of the crystal image
      imageCrystalSrc = "assets/images/" + i + ".jpg";
      console.log(imageCrystalSrc);

      // imageCrystal will be given a src link to the crystal image
      imageCrystal.attr("src", imageCrystalSrc);

      // Each imageCrystal will be given a data attribute called data-crystalValue.
      // This data attribute will be set equal to the array value.
      imageCrystal.attr("data-crystalvalue", crystalValues[i]);

      // Lastly, each crystal image (with all it classes and attributes) will get added to the page under the crystal row section
      $("#crystalrow").append(imageCrystal);

    }

    //event listener for a click on a crystal image 
    $(".img-thumbnail").on("click", function () {

      var crystalValue = $(this).attr("data-crystalvalue");
      //crystalValue

      // Every click, from every crystal adds to the global counter.
      crystalValue = parseInt(crystalValue);
      counter += crystalValue;

      // All of the same game win-lose logic applies. So the rest remains unchanged.

      $("#total").text(counter);

      if (counter === number) {
        wins++;
        $("#wins").text(wins);
        resetGame();
      } else if (counter > number) {
        losses++;
        $("#losses").text(losses);
        resetGame();
      }
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.13.0/umd/popper.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
</body>

</html>